<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sleep Sync ‚Ä¢ AI Dashboard</title>

<style>
/* ================= THEME VARIABLES ================= */
:root{
  --bg:#f4f6fb;
  --panel:#ffffff;
  --border:#e5e7eb;
  --text:#0f172a;
  --muted:#6b7280;
  --accent:#6a5af9;
  --accent2:#00c2a8;
  --fire:#ff7a18;
}

/* DARK MODE */
body.dark{
  --bg:#060814;
  --panel:#0e132b;
  --border:rgba(255,255,255,.08);
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#7c7cff;
  --accent2:#00f5d4;
}

/* ================= BASE ================= */
*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui, sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:.3s;
}

.app{padding:24px 32px}

/* ================= HEADER ================= */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:24px;
}
.header h1{margin:0;font-size:28px}
.header-right{
  display:flex;
  align-items:center;
  gap:14px;
}
.tag{
  font-size:13px;
  padding:4px 10px;
  border-radius:999px;
  color:var(--accent2);
  border:1px solid var(--border);
}
.toggle{
  cursor:pointer;
  padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--panel);
}

/* ================= GRID ================= */
.grid{
  display:grid;
  grid-template-columns:1.2fr 2fr;
  gap:24px;
}

/* ================= PANELS ================= */
.panel{
  background:var(--panel);
  border-radius:18px;
  padding:20px;
  border:1px solid var(--border);
}
.panel h2{
  margin:0 0 14px;
  font-size:14px;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.8px;
}

/* ================= INPUT ================= */
input,button{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid var(--border);
  font-size:15px;
}
input{
  background:transparent;
  color:var(--text);
}
button{
  margin-top:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:white;
  font-weight:800;
  cursor:pointer;
  border:none;
}

/* ================= PROGRESS ================= */
.xp{
  font-size:42px;
  font-weight:900;
  color:var(--accent);
}
.bar{
  height:16px;
  background:#e5e7eb;
  border-radius:999px;
  overflow:hidden;
  margin-top:10px;
}
body.dark .bar{background:#020617}
.bar-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  transition:.6s;
}

/* ================= RING ================= */
.ring{
  width:160px;
  height:160px;
  margin:auto;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  font-weight:800;
  background:conic-gradient(var(--accent) 0deg,#ddd 0deg);
}

/* ================= STREAK ================= */
.streak-wrap{
  display:flex;
  align-items:center;
  gap:12px;
}
.fire{
  font-size:28px;
  filter:drop-shadow(0 0 6px var(--fire));
}
.fire.animate{
  animation: flamePulse .6s ease-in-out;
}
.fire-count{font-weight:800}

@keyframes flamePulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.3)}
  100%{transform:scale(1)}
}

.streak{
  display:flex;
  justify-content:space-between;
  margin-top:12px;
}
.day{
  width:38px;
  height:38px;
  border-radius:10px;
  background:#e5e7eb;
  opacity:.3;
}
body.dark .day{background:#020617}
.day.active{
  opacity:1;
  background:linear-gradient(135deg,var(--fire),#ffb347);
}

/* ================= BADGES ================= */
.badge-grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:18px;
}
.badge-item{text-align:center}
.badge{
  width:70px;
  height:70px;
  margin:0 auto 8px;
  border-radius:50%;
  background:#e5e7eb;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  opacity:.3;
}
body.dark .badge{background:#020617}
.badge.unlocked{
  opacity:1;
  background:radial-gradient(circle,var(--accent2),var(--accent));
  color:white;
}
.badge-title{font-size:13px;font-weight:700}
.badge-desc{font-size:11px;color:var(--muted)}

/* ================= GRAPH ================= */
canvas{
  width:100%;
  background:transparent;
}

/* ================= POPUP ================= */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
}
.popup.show{
  opacity:1;
  pointer-events:auto;
}
.popup-card{
  background:var(--panel);
  padding:30px;
  border-radius:22px;
  text-align:center;
  border:1px solid var(--border);
}

/* ================= FOOTER ================= */
.footer{
  margin-top:20px;
  text-align:center;
  font-size:12px;
  color:var(--muted);
}
</style>
</head>

<body>

<div class="app">

  <div class="header">
    <h1>Sleep Sync</h1>
    <div class="header-right">
      <span class="tag">AI SLEEP ANALYTICS</span>
      <button class="toggle" id="themeToggle">üåô / ‚òÄÔ∏è</button>
    </div>
  </div>

  <div class="grid">

    <!-- LEFT -->
    <div>
      <div class="panel">
        <h2>Sleep Input</h2>
        <input id="hoursInput" type="number" step="0.25" placeholder="Enter hours slept">
        <button id="logBtn">Run Analysis</button>
      </div>

      <div class="panel" style="margin-top:24px">
        <h2>Daily Sleep Quality</h2>
        <div id="sleepRing" class="ring">0h</div>
      </div>

      <div class="panel" style="margin-top:24px">
        <h2>Streak Status</h2>
        <div class="streak-wrap">
          <div class="fire">üî•</div>
          <div class="fire-count"><span id="streakCount">0</span> days</div>
        </div>
        <div id="streakRow" class="streak"></div>
      </div>
    </div>

    <!-- RIGHT -->
    <div>
      <div class="panel">
        <h2>Neural Progress</h2>
        <div class="xp"><span id="xpVal">0</span> XP</div>
        <div class="bar"><div id="xpFill" class="bar-fill"></div></div>
        <button id="exportBtn">üìÑ Export Sleep Report</button>
      </div>

      <div class="panel" style="margin-top:24px">
        <h2>Sleep Trend (7 Days)</h2>
        <canvas id="graph" height="160"></canvas>
      </div>

      <div class="panel" style="margin-top:24px">
        <h2>Badge Collection</h2>
        <div class="badge-grid">
          <div class="badge-item"><div id="b7" class="badge">üåô</div><div class="badge-title">Night Owl</div><div class="badge-desc">‚â• 7h</div></div>
          <div class="badge-item"><div id="b8" class="badge">‚ù§Ô∏è</div><div class="badge-title">Healthy Sleep</div><div class="badge-desc">‚â• 8h</div></div>
          <div class="badge-item"><div id="b9" class="badge">‚ö°</div><div class="badge-title">Power Sleeper</div><div class="badge-desc">‚â• 9h</div></div>
          <div class="badge-item"><div id="b10" class="badge">üß†</div><div class="badge-title">Deep Focus</div><div class="badge-desc">XP ‚â• 100</div></div>
          <div class="badge-item"><div id="b11" class="badge">üëë</div><div class="badge-title">Sleep Master</div><div class="badge-desc">XP ‚â• 200</div></div>
        </div>
      </div>
    </div>

  </div>

  <div class="footer">AI demo ‚Ä¢ Export & animations enabled</div>
</div>

<!-- POPUP -->
<div class="popup" id="popup">
  <div class="popup-card">
    <h3>üéâ Hurray!</h3>
    <p id="popupText"></p>
    <button onclick="closePopup()">Awesome</button>
  </div>
</div>

<script>
let state={
  xp:0,
  history:Array(7).fill(0),
  unlocked:{},
  lastStreak:0
};

const hoursInput=document.getElementById("hoursInput");
const logBtn=document.getElementById("logBtn");
const xpVal=document.getElementById("xpVal");
const xpFill=document.getElementById("xpFill");
const ring=document.getElementById("sleepRing");
const streakRow=document.getElementById("streakRow");
const streakCount=document.getElementById("streakCount");
const graph=document.getElementById("graph");
const gctx=graph.getContext("2d");
const popup=document.getElementById("popup");
const popupText=document.getElementById("popupText");

document.getElementById("themeToggle").onclick=()=>{
  document.body.classList.toggle("dark");
  drawGraph();
};

function showPopup(text){
  popupText.innerText=text;
  popup.classList.add("show");
}
function closePopup(){popup.classList.remove("show")}

function unlock(id,text){
  if(state.unlocked[id]) return;
  state.unlocked[id]=true;
  document.getElementById(id).classList.add("unlocked");
  showPopup(text);
}

function renderStreak(){
  streakRow.innerHTML="";
  const streak = state.history.filter(h=>h>0).length;
  streakCount.innerText = streak;

  if(streak > state.lastStreak){
    const fire=document.querySelector(".fire");
    fire.classList.add("animate");
    setTimeout(()=>fire.classList.remove("animate"),600);
  }
  state.lastStreak = streak;

  state.history.forEach(h=>{
    const d=document.createElement("div");
    d.className="day"+(h>0?" active":"");
    streakRow.appendChild(d);
  });
}

function drawGraph(){
  gctx.clearRect(0,0,graph.width,graph.height);
  gctx.strokeStyle=getComputedStyle(document.body).getPropertyValue("--accent");
  gctx.lineWidth=3;
  gctx.beginPath();
  state.history.forEach((h,i)=>{
    const x=i*(graph.width/6);
    const y=graph.height-(h/12)*graph.height;
    if(i===0) gctx.moveTo(x,y);
    else gctx.lineTo(x,y);
  });
  gctx.stroke();
}

logBtn.onclick=()=>{
  const hrs=Number(hoursInput.value);
  if(!hrs||hrs<=0) return alert("Enter valid hours");

  state.xp+=Math.round(hrs*10);
  state.history.shift();
  state.history.push(hrs);

  xpVal.innerText=state.xp;
  xpFill.style.width=Math.min(100,state.xp/10)+"%";

  ring.style.background=`conic-gradient(var(--accent) ${(hrs/12)*360}deg,#ddd 0deg)`;
  ring.innerText=hrs+"h";

  if(hrs>=7) unlock("b7","Night Owl badge unlocked!");
  if(hrs>=8) unlock("b8","Healthy Sleep badge unlocked!");
  if(hrs>=9) unlock("b9","Power Sleeper badge unlocked!");
  if(state.xp>=100) unlock("b10","Deep Focus badge unlocked!");
  if(state.xp>=200) unlock("b11","Sleep Master badge unlocked!");

  renderStreak();
  drawGraph();
  hoursInput.value="";
};

document.getElementById("exportBtn").onclick=()=>{
  let csv="Sleep Sync Report\n\n";
  csv+="XP,"+state.xp+"\n";
  csv+="Streak,"+state.history.filter(h=>h>0).length+"\n\n";
  csv+="Day,Sleep Hours\n";
  state.history.forEach((h,i)=>csv+=`Day ${i+1},${h}\n`);

  const blob=new Blob([csv],{type:"text/csv"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="sleep-sync-report.csv";
  a.click();
};

renderStreak();
drawGraph();
</script>

</body>
</html>
